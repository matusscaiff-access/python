{% extends "base.html" %}

{% block title %}Register{% endblock %}

{% block head %}
    {{ super() }}
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
    <style>
        .flash-message {
            margin-top: 15px;
        }
    </style>
{% endblock %}

{% block body %}
<link rel="stylesheet" type="text/css" href="{{ url_for('static', filename='styles/styles.css') }}">
    <div class="page-header">
        <h1 id="register-header">Register Page</h1>
    </div>

    <form method="POST" id="all-fields">
        {{ form.hidden_tag() }}

        <!-- Username field -->
        <p>
            {{ form.username.label }} {{ form.username() }}
            {% for error in form.username.errors %}
                <span class="text-danger">{{ error }}</span>
            {% endfor %}
        </p>

        <!-- Email field -->
        <p>
            {{ form.email.label }} {{ form.email() }}
            {% for error in form.email.errors %}
                <span class="text-danger">{{ error }}</span>
            {% endfor %}
        </p>

        <!-- Password field -->
        <p>
            {{ form.password.label }} {{ form.password() }}
            {% for error in form.password.errors %}
                <span class="text-danger">{{ error }}</span>
            {% endfor %}
        </p>

        <!-- Confirm Password field -->
        <p>
            {{ form.confirm_password.label }} {{ form.confirm_password() }}
            {% for error in form.confirm_password.errors %}
                <span class="text-danger">{{ error }}</span>
            {% endfor %}
        </p>

        <!-- Register button -->
        <p>
            {{ form.submit() }}
        </p>

        <!-- Flash message for registration success -->
        {% with messages = get_flashed_messages(with_categories=true) %}
            {% if messages %}
                <div class="flash-message">
                    {% for category, message in messages %}
                        <div class="alert alert-{{ category }}">{{ message }}</div>
                    {% endfor %}
                </div>
            {% endif %}
        {% endwith %}
    </form>

    <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.9.2/dist/umd/popper.min.js"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>
{% endblock %}
